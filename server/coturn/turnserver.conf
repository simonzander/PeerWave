# ============================================================
# PeerWave COTURN Configuration
# STUN + TURN Server für WebRTC P2P Connections
# ============================================================

# Listening IPs
listening-ip=0.0.0.0
# relay-ip=0.0.0.0  # Auto-detected wenn DETECT_RELAY_IP=yes

# External IP (wird automatisch erkannt oder manuell setzen)
# external-ip=YOUR_SERVER_IP

# Listening Ports
listening-port=3478
# TLS listening port (falls du HTTPS nutzen willst)
tls-listening-port=5349

# Relay Ports Range (für TURN)
min-port=49152
max-port=65535

# ============================================================
# Authentication
# ============================================================

# Verwende Long-Term Credentials
lt-cred-mech

# Statische Credentials (für Testing)
# user=peerwave:peerwave123

# Oder: Shared Secret für dynamische Credentials (EMPFOHLEN für Production)
use-auth-secret
static-auth-secret=DEIN_GEHEIMER_SHARED_SECRET_HIER_ÄNDERN

# Realm (Domain)
realm=peerwave.local

# ============================================================
# Security
# ============================================================

# Fingerprint in TURN messages
fingerprint

# Deny TCP relay (nur UDP für bessere Performance)
# no-tcp-relay

# Disable UDP (falls nur TCP gewünscht)
# no-udp

# Max. Bandbreite pro User (in KB/s)
# max-bps=1024000  # 1 GB/s

# Total Bandbreite Limit
# bps-capacity=0  # 0 = unlimited

# User Quota
# user-quota=100

# Total Quota
# total-quota=1000

# ============================================================
# Performance
# ============================================================

# Verbosity (für Debugging: 3-5, Production: 1)
verbose

# Log file
log-file=/var/log/coturn/turnserver.log

# Prozesse/Threads
# proc-user=turnserver
# proc-group=turnserver

# ============================================================
# TLS/SSL (optional, für TURNS)
# ============================================================

# Falls du TLS verwenden willst (empfohlen für Production)
# cert=/etc/coturn/certs/cert.pem
# pkey=/etc/coturn/certs/key.pem

# Cipher List
# cipher-list="ECDHE-RSA-AES256-GCM-SHA512:DHE-RSA-AES256-GCM-SHA512"

# ============================================================
# Additional Options
# ============================================================

# Deny private IP ranges as peers (Sicherheit)
no-loopback-peers
no-multicast-peers

# Mobility support
mobility

# Server Name
server-name=peerwave-turn

# Disable CLI (Web-Admin Interface auf Port 5766)
# web-admin
# web-admin-ip=127.0.0.1
# web-admin-port=5766

# Prometheus Metrics (für Monitoring)
prometheus

# ============================================================
# Allowed/Denied Peers
# ============================================================

# Erlaubte IP Ranges (optional, für zusätzliche Sicherheit)
# allowed-peer-ip=10.0.0.0-10.255.255.255
# allowed-peer-ip=192.168.0.0-192.168.255.255

# Denied IP Ranges (empfohlen)
# denied-peer-ip=0.0.0.0-0.255.255.255
# denied-peer-ip=127.0.0.0-127.255.255.255
