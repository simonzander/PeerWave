# ============================================
# PeerWave Environment Configuration Blueprint
# ============================================
# Copy this file to .env and adjust values for your deployment

# ============================================
# Server Configuration
# ============================================
NODE_ENV=production
PORT=3000
HOST=0.0.0.0

# ============================================
# Database Configuration
# ============================================
# SQLite database path (will be created if not exists)
DB_PATH=./db/peerwave.sqlite
DB_WAL_MODE=true

# ============================================
# Session & Authentication
# ============================================
# CRITICAL: Change this to a long random string in production!
# Generate with: openssl rand -base64 32
SESSION_SECRET=change-this-in-production-to-a-long-random-string-minimum-32-characters

# Session cookie name
SESSION_NAME=peerwave.sid

# Session max age in milliseconds (default: 30 days)
SESSION_MAX_AGE=2592000000

# HMAC session expiry for native clients (in days)
HMAC_SESSION_EXPIRY_DAYS=30

# Nonce cache cleanup interval (in minutes)
HMAC_NONCE_CLEANUP_INTERVAL=10

# ============================================
# LiveKit Configuration (Video Calls)
# ============================================
# LiveKit server URL (WebSocket endpoint)
# Docker: ws://peerwave-livekit:7880
# Local: ws://localhost:7880
LIVEKIT_URL=ws://peerwave-livekit:7880

# LiveKit API credentials
# CRITICAL: Change these in production!
# Generate with: openssl rand -base64 32
LIVEKIT_API_KEY=devkey
LIVEKIT_API_SECRET=secret

# TURN server domain (for P2P ICE candidates)
# Use your public domain or IP
LIVEKIT_TURN_DOMAIN=localhost

# LiveKit token expiry (in seconds, default: 24 hours)
LIVEKIT_TOKEN_EXPIRY=86400

# ============================================
# CORS Configuration
# ============================================
# Comma-separated list of allowed origins
# Example: https://peerwave.example.com,https://app.example.com
CORS_ORIGINS=http://localhost:3000,http://localhost:8080

# ============================================
# File Upload Limits
# ============================================
# Max file size in bytes (default: 100MB)
MAX_FILE_SIZE=104857600

# Max files per upload
MAX_FILES=10

# ============================================
# Security Settings
# ============================================
# Enable HTTPS (requires certificate files)
ENABLE_HTTPS=false

# Certificate paths (if HTTPS enabled)
CERT_PATH=./cert/server.crt
KEY_PATH=./cert/server.key

# Rate limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX=100

# ============================================
# Logging Configuration
# ============================================
# Log level: error, warn, info, debug
LOG_LEVEL=info

# Enable request logging
ENABLE_REQUEST_LOG=true

# ============================================
# Cleanup Jobs
# ============================================
# Auto-cleanup old sessions (in days)
SESSION_CLEANUP_DAYS=30

# Auto-cleanup old messages (in days, 0 = disabled)
MESSAGE_CLEANUP_DAYS=0

# ============================================
# Docker-Specific Settings
# ============================================
# These are typically set in docker-compose.yml
# and don't need to be in .env file

# LIVEKIT_URL=ws://peerwave-livekit:7880
# DB_PATH=/usr/src/app/db/peerwave.sqlite
# CERT_PATH=/usr/src/app/cert/server.crt
# KEY_PATH=/usr/src/app/cert/server.key
