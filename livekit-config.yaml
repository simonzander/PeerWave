# LiveKit Server Configuration
port: 7880
bind_addresses:
  - "0.0.0.0"

rtc:
  # Port range for WebRTC connections (RTP media streams)
  # MAXIMUM RANGE: 10001 ports for ~10000 concurrent streams
  # Each peer connection uses ~1-2 ports (audio + video)
  port_range_start: 40000
  port_range_end: 50000
  # Use localhost for local development (set to true for production!)
  use_external_ip: false
  # STUN servers for NAT traversal
  stun_servers:
    - stun.l.google.com:19302
    - stun1.l.google.com:19302
  
# Room settings
room:
  # Enable empty timeout (close empty rooms after 5 minutes)
  empty_timeout: 300
  # Maximum number of participants per room
  max_participants: 100
  # Enable auto-create rooms
  auto_create: true

# Logging
logging:
  level: info
  # Available levels: debug, info, warn, error
  sample: false

# Keys for JWT authentication
keys:
  # API key and secret for token generation
  # These should match your server environment variables
  devkey: secret

# ============================================================
# TURN Server (for P2P NAT traversal)
# Replaces Coturn - embedded TURN server with JWT auth
# ============================================================
turn:
  enabled: true
  domain: turn.peerwave.local
  # TURN/TLS - looks like HTTPS, passes corporate firewalls
  tls_port: 5349
  # TURN/UDP - modern QUIC-compatible, best performance
  udp_port: 443
  # TURN Relay port range (for P2P data relay)
  # MAXIMUM RANGE: 10001 ports for ~10000 concurrent P2P connections
  # Each TURN relay connection uses 1 port
  relay_range_start: 50000
  relay_range_end: 60000
  # SSL certificates (mounted from ./livekit-certs/)
  cert_file: /certs/turn-cert.pem
  key_file: /certs/turn-key.pem

# Webhook (optional - for room events)
# webhook:
#   urls:
#     - http://server:3000/api/livekit/webhook
#   api_key: devkey

# Redis (optional - for scaling multiple LiveKit instances)
# redis:
#   address: redis:6379
