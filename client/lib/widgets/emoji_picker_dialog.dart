import 'package:flutter/material.dart';

/// Emoji picker dialog for adding reactions to messages
class EmojiPickerDialog extends StatelessWidget {
  final Function(String emoji) onEmojiSelected;

  const EmojiPickerDialog({super.key, required this.onEmojiSelected});

  // Common emoji categories
  static final List<Map<String, dynamic>> _emojiCategories = [
    {
      'name': 'Smileys',
      'icon': 'ðŸ˜Š',
      'emojis': [
        'ðŸ˜€',
        'ðŸ˜ƒ',
        'ðŸ˜„',
        'ðŸ˜',
        'ðŸ˜…',
        'ðŸ˜‚',
        'ðŸ¤£',
        'ðŸ˜Š',
        'ðŸ˜‡',
        'ðŸ™‚',
        'ðŸ™ƒ',
        'ðŸ˜‰',
        'ðŸ˜Œ',
        'ðŸ˜',
        'ðŸ¥°',
        'ðŸ˜˜',
        'ðŸ˜—',
        'ðŸ˜™',
        'ðŸ˜š',
        'ðŸ˜‹',
        'ðŸ˜›',
        'ðŸ˜',
        'ðŸ˜œ',
        'ðŸ¤ª',
        'ðŸ¤¨',
        'ðŸ§',
        'ðŸ¤“',
        'ðŸ˜Ž',
        'ðŸ¤©',
        'ðŸ¥³',
        'ðŸ˜',
        'ðŸ˜’',
        'ðŸ˜ž',
        'ðŸ˜”',
        'ðŸ˜Ÿ',
        'ðŸ˜•',
        'ðŸ™',
        'â˜¹ï¸',
        'ðŸ˜£',
        'ðŸ˜–',
        'ðŸ˜«',
        'ðŸ˜©',
        'ðŸ¥º',
        'ðŸ˜¢',
        'ðŸ˜­',
        'ðŸ˜¤',
        'ðŸ˜ ',
        'ðŸ˜¡',
        'ðŸ¤¬',
        'ðŸ¤¯',
        'ðŸ˜³',
        'ðŸ¥µ',
        'ðŸ¥¶',
        'ðŸ˜±',
        'ðŸ˜¨',
        'ðŸ˜°',
        'ðŸ˜¥',
        'ðŸ˜“',
        'ðŸ¤—',
        'ðŸ¤”',
        'ðŸ¤­',
        'ðŸ¤«',
        'ðŸ¤¥',
        'ðŸ˜¶',
        'ðŸ˜',
        'ðŸ˜‘',
        'ðŸ˜¬',
        'ðŸ™„',
        'ðŸ˜¯',
        'ðŸ˜¦',
        'ðŸ˜§',
        'ðŸ˜®',
        'ðŸ˜²',
        'ðŸ¥±',
        'ðŸ˜´',
        'ðŸ¤¤',
        'ðŸ˜ª',
        'ðŸ˜µ',
        'ðŸ¤',
        'ðŸ¥´',
      ],
    },
    {
      'name': 'Gestures',
      'icon': 'ðŸ‘',
      'emojis': [
        'ðŸ‘',
        'ðŸ‘Ž',
        'ðŸ‘Š',
        'âœŠ',
        'ðŸ¤›',
        'ðŸ¤œ',
        'ðŸ¤ž',
        'âœŒï¸',
        'ðŸ¤Ÿ',
        'ðŸ¤˜',
        'ðŸ‘Œ',
        'ðŸ¤Œ',
        'ðŸ¤',
        'ðŸ‘ˆ',
        'ðŸ‘‰',
        'ðŸ‘†',
        'ðŸ‘‡',
        'â˜ï¸',
        'ðŸ‘‹',
        'ðŸ¤š',
        'ðŸ–',
        'âœ‹',
        'ðŸ––',
        'ðŸ‘',
        'ðŸ™Œ',
        'ðŸ‘',
        'ðŸ¤²',
        'ðŸ¤',
        'ðŸ™',
        'âœï¸',
        'ðŸ’ª',
        'ðŸ¦¾',
      ],
    },
    {
      'name': 'Hearts',
      'icon': 'â¤ï¸',
      'emojis': [
        'â¤ï¸',
        'ðŸ§¡',
        'ðŸ’›',
        'ðŸ’š',
        'ðŸ’™',
        'ðŸ’œ',
        'ðŸ–¤',
        'ðŸ¤',
        'ðŸ¤Ž',
        'ðŸ’”',
        'â¤ï¸â€ðŸ”¥',
        'â¤ï¸â€ðŸ©¹',
        'ðŸ’•',
        'ðŸ’ž',
        'ðŸ’“',
        'ðŸ’—',
        'ðŸ’–',
        'ðŸ’˜',
        'ðŸ’',
        'ðŸ’Ÿ',
        'â˜®ï¸',
        'âœï¸',
        'â˜ªï¸',
        'ðŸ•‰',
      ],
    },
    {
      'name': 'Celebration',
      'icon': 'ðŸŽ‰',
      'emojis': [
        'ðŸŽ‰',
        'ðŸŽŠ',
        'ðŸŽˆ',
        'ðŸŽ',
        'ðŸŽ€',
        'ðŸŽ‚',
        'ðŸŽ†',
        'ðŸŽ‡',
        'ðŸ§¨',
        'âœ¨',
        'ðŸŽƒ',
        'ðŸŽ„',
        'ðŸŽ‹',
        'ðŸŽ',
        'ðŸŽŽ',
        'ðŸŽ',
        'ðŸŽ',
        'ðŸŽ‘',
        'ðŸ§§',
        'ðŸŽ—',
        'ðŸŽŸ',
        'ðŸŽ«',
        'ðŸ†',
        'ðŸ…',
        'ðŸ¥‡',
        'ðŸ¥ˆ',
        'ðŸ¥‰',
        'âš½',
        'âš¾',
        'ðŸ€',
        'ðŸ',
        'ðŸˆ',
      ],
    },
    {
      'name': 'Objects',
      'icon': 'â­',
      'emojis': [
        'â­',
        'ðŸŒŸ',
        'ðŸ’«',
        'âœ¨',
        'â˜„ï¸',
        'ðŸ’¥',
        'ðŸ”¥',
        'ðŸŒˆ',
        'â˜€ï¸',
        'ðŸŒ¤',
        'â›…',
        'ðŸŒ¥',
        'â˜ï¸',
        'ðŸŒ¦',
        'ðŸŒ§',
        'â›ˆ',
        'ðŸŒ©',
        'ðŸŒ¨',
        'â„ï¸',
        'â˜ƒï¸',
        'â›„',
        'ðŸŒ¬',
        'ðŸ’¨',
        'ðŸ’§',
        'ðŸ’¦',
        'â˜”',
        'â˜‚ï¸',
        'ðŸŒŠ',
        'ðŸŒ«',
        'ðŸŒª',
        'ðŸŒ€',
        'ðŸŒˆ',
      ],
    },
    {
      'name': 'Animals',
      'icon': 'ðŸ¶',
      'emojis': [
        'ðŸ¶',
        'ðŸ±',
        'ðŸ­',
        'ðŸ¹',
        'ðŸ°',
        'ðŸ¦Š',
        'ðŸ»',
        'ðŸ¼',
        'ðŸ¨',
        'ðŸ¯',
        'ðŸ¦',
        'ðŸ®',
        'ðŸ·',
        'ðŸ¸',
        'ðŸµ',
        'ðŸ”',
        'ðŸ§',
        'ðŸ¦',
        'ðŸ¤',
        'ðŸ¦†',
        'ðŸ¦…',
        'ðŸ¦‰',
        'ðŸ¦‡',
        'ðŸº',
        'ðŸ—',
        'ðŸ´',
        'ðŸ¦„',
        'ðŸ',
        'ðŸª±',
        'ðŸ›',
        'ðŸ¦‹',
        'ðŸŒ',
      ],
    },
    {
      'name': 'Food',
      'icon': 'ðŸ•',
      'emojis': [
        'ðŸ•',
        'ðŸ”',
        'ðŸŸ',
        'ðŸŒ­',
        'ðŸ¿',
        'ðŸ§ˆ',
        'ðŸ¥“',
        'ðŸ¥š',
        'ðŸ³',
        'ðŸ§‡',
        'ðŸ¥ž',
        'ðŸ§ˆ',
        'ðŸž',
        'ðŸ¥',
        'ðŸ¥–',
        'ðŸ¥¨',
        'ðŸ¥¯',
        'ðŸ¥ž',
        'ðŸ§€',
        'ðŸ–',
        'ðŸ—',
        'ðŸ¥©',
        'ðŸ¥ª',
        'ðŸŒ®',
        'ðŸŒ¯',
        'ðŸ¥™',
        'ðŸ§†',
        'ðŸ¥š',
        'ðŸ²',
        'ðŸ',
        'ðŸ¥˜',
        'ðŸœ',
      ],
    },
    {
      'name': 'Symbols',
      'icon': 'âœ…',
      'emojis': [
        'âœ…',
        'âŒ',
        'â—',
        'â“',
        'â•',
        'â”',
        'â€¼ï¸',
        'â‰ï¸',
        'ðŸ’¯',
        'ðŸ”¥',
        'ðŸ’¥',
        'ðŸ’¢',
        'ðŸ’¬',
        'ðŸ’­',
        'ðŸ—¯',
        'ðŸ’¤',
        'ðŸ’¨',
        'ðŸ•³',
        'ðŸš«',
        'â›”',
        'ðŸ“µ',
        'ðŸš­',
        'ðŸš±',
        'ðŸš·',
        'ðŸš¯',
        'ðŸš³',
        'ðŸš¹',
        'ðŸšº',
        'ðŸš»',
        'ðŸš¼',
        'âš ï¸',
        'ðŸ”ž',
      ],
    },
  ];

  @override
  Widget build(BuildContext context) {
    return Dialog(
      backgroundColor: Theme.of(context).colorScheme.surface,
      shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(16)),
      child: Container(
        width: 400,
        height: 500,
        padding: const EdgeInsets.all(16),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            // Header
            Row(
              mainAxisAlignment: MainAxisAlignment.spaceBetween,
              children: [
                Text(
                  'Pick an emoji',
                  style: Theme.of(
                    context,
                  ).textTheme.titleLarge?.copyWith(fontWeight: FontWeight.bold),
                ),
                IconButton(
                  icon: const Icon(Icons.close),
                  onPressed: () => Navigator.of(context).pop(),
                ),
              ],
            ),
            const SizedBox(height: 16),

            // Emoji grid with categories
            Expanded(
              child: DefaultTabController(
                length: _emojiCategories.length,
                child: Column(
                  children: [
                    // Category tabs
                    TabBar(
                      isScrollable: true,
                      tabs: _emojiCategories.map((category) {
                        return Tab(
                          child: Text(
                            category['icon'] as String,
                            style: const TextStyle(fontSize: 24),
                          ),
                        );
                      }).toList(),
                    ),
                    const SizedBox(height: 8),

                    // Emoji grid
                    Expanded(
                      child: TabBarView(
                        children: _emojiCategories.map((category) {
                          final emojis = category['emojis'] as List<String>;
                          return GridView.builder(
                            gridDelegate:
                                const SliverGridDelegateWithFixedCrossAxisCount(
                                  crossAxisCount: 8,
                                  mainAxisSpacing: 8,
                                  crossAxisSpacing: 8,
                                ),
                            itemCount: emojis.length,
                            itemBuilder: (context, index) {
                              final emoji = emojis[index];
                              return InkWell(
                                onTap: () {
                                  onEmojiSelected(emoji);
                                  Navigator.of(context).pop();
                                },
                                borderRadius: BorderRadius.circular(8),
                                child: Container(
                                  decoration: BoxDecoration(
                                    color: Theme.of(
                                      context,
                                    ).colorScheme.surfaceContainerHighest,
                                    borderRadius: BorderRadius.circular(8),
                                  ),
                                  child: Center(
                                    child: Text(
                                      emoji,
                                      style: const TextStyle(fontSize: 28),
                                    ),
                                  ),
                                ),
                              );
                            },
                          );
                        }).toList(),
                      ),
                    ),
                  ],
                ),
              ),
            ),
          ],
        ),
      ),
    );
  }

  /// Show the emoji picker dialog
  static Future<void> show(
    BuildContext context,
    Function(String emoji) onEmojiSelected,
  ) async {
    await showDialog(
      context: context,
      builder: (context) => EmojiPickerDialog(onEmojiSelected: onEmojiSelected),
    );
  }
}
